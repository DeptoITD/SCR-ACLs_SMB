; ============================================================
; Sistema Declarativo ACL - Reglas por perfil para:
; /srv/samba/02_Proyectos/<PROYECTO>/01_WIP/<ESPECIALIDAD>
;
; REQUISITO: "Lo que no edita NO lo ve (ni lo lista / ni aparece)"
; MODELO: DENY-BY-DEFAULT
;
; PRINCIPIOS:
; 1) Solo se otorgan permisos en carpetas listadas en "write".
; 2) En 01_WIP, perfiles restringidos reciben SOLO 'x' (traverse):
;    - Pueden entrar a sus carpetas si tienen permiso directo,
;      pero NO pueden listar el contenido de WIP.
; 3) BIM puede listar y entrar a todas las carpetas del WIP.
; 4) Para evitar "apariciones" por ACLs antiguas, se debe purgar ACL previa
;    del perfil en rutas no autorizadas (si el motor lo soporta).
; ============================================================

[GLOBAL]
root=/srv/samba/02_Proyectos
project_glob=*
wip_folder=01_WIP

[GLOBAL]
base_project=rx
base_wip=rx
hide_non_write=1



; =========================
; PERFIL: IND_A (Arquitectura)
; Edita y ve SOLO:
; A_ARQ, O_LEV, YAC_ACU, YPA_PAT, YPM_PTR, YSE_SEN, YSH_SGH
; =========================
[IND_A]
base_project=rx
base_wip=rx
write=A_ARQ,O_LEV,YAC_ACU,YPA_PAT,YPM_PTR,YSE_SEN,YSH_SGH


; =========================
; PERFIL: IND_E (Estructura)
; Edita y ve SOLO:
; E_EST, O_LEV
; =========================
[IND_E]
base_project=rx
base_wip=rx
write=E_EST,O_LEV


; =========================
; PERFIL: IND_YTP (Geotecnia)
; Edita y ve SOLO:
; YTP_TOP, A_ARQ, O_LEV, YAC_ACU, YPA_PAT, YPM_PTR, YSE_SEN, YSH_SGH, E_EST
; =========================
[IND_YTP]
base_project=rx
base_wip=rx
write=YTP_TOP,A_ARQ,O_LEV,YAC_ACU,YPA_PAT,YPM_PTR,YSE_SEN,YSH_SGH,E_EST


; =========================
; PERFIL: IND_B (BIM)
; Edita y ve TODAS las carpetas del WIP
; =========================
[IND_B]
base_project=rx
base_wip=rx
wip_full_control=rwx
default_dir=rwx
default_file=rw-


; =========================
; Cat√°logo de especialidades
; =========================
[SPECIALTIES]
A_ARQ
B_BIM
D_DET
E_EST
F_PCI
F_RCI
G_GEN
G_PMO
H_HID
I_GAS
L_ELE
M_MEC
O_LEV
R_REC
T_TEL
YAC_ACU
YBI_BIO
YGE_GEO
YIL_ILU
YPA_PAT
YPM_PTR
YSC_SyC
YTP_TOP
YVU_VUL
YSE_SEN
YSH_SGH
