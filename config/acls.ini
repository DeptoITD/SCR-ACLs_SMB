; ============================================================
; Sistema Declarativo ACL - Reglas por perfil para:
; /srv/samba/02_Proyectos/<PROYECTO>/01_WIP/<ESPECIALIDAD>
;
; OBJETIVO (Samba):
; - En /srv/samba/02_Proyectos: listar TODOS los proyectos.
; - En cada proyecto: ver 01_WIP.
; - Dentro de 01_WIP: ver SOLO especialidades autorizadas (write).
;
; REQUISITO: `hide unreadable = yes` en smb.conf (ya lo tienes).
; ============================================================

[GLOBAL]
root=/srv/samba/02_Proyectos
project_glob=*
wip_folder=01_WIP

; Permiso mínimo para LISTAR proyectos en el root del share
base_root=rx

; Permiso base sobre cada carpeta de proyecto (listar y entrar)
base_project=rx

; Permiso base sobre 01_WIP (listar y entrar)
base_wip=rx

; Permisos sobre carpetas/archivos existentes
write_dir=rwx
write_file=rw-

; Default ACL (solo se aplica a directorios, por definición POSIX)
default_dir=rwx

; Si 1, aplica deny explícito --- sobre especialidades NO incluidas en write
hide_non_write=1


; =========================
; IND_A (Arquitectura)
; =========================
[g:IND_A]
base_project=rx
base_wip=rx
write=A_ARQ,O_LEV,YAC_ACU,YPA_PAT,YPM_PTR,YSE_SEN,YSH_SGH


; =========================
; IND_E (Estructuras)
; =========================
[g:IND_E]
base_project=rx
base_wip=rx
write=E_EST,O_LEV


; =========================
; IND_YTP (Topografia + otras)
; =========================
[g:IND_YTP]
base_project=rx
base_wip=rx
write=YTP_TOP,A_ARQ,O_LEV,YAC_ACU,YPA_PAT,YPM_PTR,YSE_SEN,YSH_SGH,E_EST


; =========================
; IND_B (BIM / full control WIP)
; =========================
[g:IND_B]
base_project=rx
base_wip=rx
wip_full_control=rwx
default_dir=rwx


; =========================
; Catálogo de especialidades
; =========================
[SPECIALTIES]
A_ARQ
B_BIM
D_DET
E_EST
F_PCI
F_RCI
G_GEN
G_PMO
H_HID
I_GAS
L_ELE
M_MEC
O_LEV
R_REC
T_TEL
YAC_ACU
YBI_BIO
YGE_GEO
YIL_ILU
YPA_PAT
YPM_PTR
YSC_SyC
YTP_TOP
YVU_VUL
YSE_SEN
YSH_SGH
